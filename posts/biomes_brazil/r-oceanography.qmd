---
title: "Biogeographic Domains and Bocaina de Minas"
date: "2025-04-24"
categories: [R, Ecology, Data Analysis, Data Visualization]
image: biomes_brazil.png
editor_options: 
  chunk_output_type: inline
format:
  html:
    theme:
      light: flatly
      dark: [flatly, darkly]
    code-link: true
    code-fold: show
    code-tools: true
    toc: true
---


```{r}
# Load necessary libraries
library(sf)
library(tidyverse)
library(rnaturalearth)
library(rnaturalearthdata)
library(geobr)         # For Brazilian states and biomes
library(ggspatial)     # For north arrow and scale bar
library(patchwork) 

```



```{r}
# define the fonts
windowsFonts(
  gillsansmt = windowsFont("Gill sans MT")
)

```



```{r}
# Load biomes and states
biomes <- read_biomes()
states <- read_state()
```



```{r}
# Filter Minas Gerais
mg_state <- states %>% filter(abbrev_state == "MG")

```


```{r}
# Bocaina de Minas coordinates
bocaina <- data.frame(
  name = "Bocaina de Minas",
  lon = -44.5242,
  lat = -22.1694
) %>%
  st_as_sf(coords = c("lon", "lat"), crs = 4326)

```



```{r}
# Define rectangle (study area box)
rectangle <- st_as_sf(
  st_sfc(
    st_polygon(list(rbind(
      c(-53, -25), c(-38, -25),
      c(-38, -13), c(-53, -13),
      c(-53, -25)
    )))
  ),
  crs = 4326
)

```



```{r}
# Brazil Map (Map A)
map_a <- ggplot() +
  geom_sf(data = states, fill = "gray90", color = "black", size = 0.3) +
  geom_sf(data = biomes, aes(fill = name_biome), color = NA) +
  geom_sf(data = mg_state, fill = NA, color = "black", size = 0.9) +
  geom_sf(data = rectangle, fill = NA, color = "black", size = 1.2) +
  scale_fill_manual(
    values = c(
      "Amazônia" = "#bdbdbd",
      "Caatinga" = "#636363",
      "Cerrado" = "#969696",
      "Mata Atlântica" = "#d9d9d9",
      "Pampa" = "#252525",
      "Pantanal" = "#737373"
    )
  ) +
  coord_sf(xlim = c(-75, -30), ylim = c(-35, 5)) +
  theme_minimal() +
  theme(
    legend.position = "none",
    panel.background = element_rect(fill = NA, 
                                    color = "black", 
                                    linewidth = 0.5),
    panel.grid.minor = element_blank(),
    panel.grid.major = element_line(color = "grey90", 
                                    linewidth = 0.5,
                                    linetype = "dashed"),
    axis.ticks = element_line(color = "black"),
    text = element_text(family = "gillsansmt"),
    legend.title = element_text(face = "bold")
    
  )


map_a

```



```{r}
# Biomes Map (Map B)
map_b <- ggplot() +
  geom_sf(data = biomes, aes(fill = name_biome), color = NA) +
  geom_sf(data = mg_state, fill = NA, color = "black", size = 0.9) +
  #geom_sf(data = bocaina, color = "red", size = 3) +
  coord_sf(xlim = c(-55, -35), ylim = c(-25, -14)) +
  scale_fill_manual(
    name = "Biomes",
    values = c(
      "Amazônia" = "#bdbdbd",
      "Caatinga" = "#636363",
      "Cerrado" = "#969696",
      "Mata Atlântica" = "#d9d9d9",
      "Pampa" = "#252525",
      "Pantanal" = "#737373"
    )
  ) +
  
  annotation_north_arrow(location = "tr", which_north = "true",
                         style = north_arrow_fancy_orienteering()) +
  annotation_scale(location = "bl", width_hint = 0.3, 
                   text_cex = 0.8, line_width = 0.7) +
  
  theme_minimal() +
  theme(
    panel.background = element_rect(fill = NA, color = "black", linewidth = 0.5),
    plot.title = element_text(hjust = 0.5, size = 14, face = "bold"),
    legend.title = element_text(size = 12, face = "bold"),
    legend.text = element_text(size = 9),
    legend.position = "right",
    panel.grid.minor = element_blank(),
    panel.grid.major = element_line(color = "grey90", 
                                    linewidth = 0.4,
                                    linetype = "dashed"),
    axis.ticks = element_line(color = "black"),
    text = element_text(family = "gillsansmt")
  ) +
  labs(title = "Biogeographic Domains and Bocaina de Minas")


map_b

```



```{r}
# Combine maps side by side
biomes_brazil = map_a + map_b + plot_layout(ncol = 2)

```


```{r}
biomes_brazil
```
